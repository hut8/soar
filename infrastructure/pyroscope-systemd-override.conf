# Pyroscope systemd service override for single-node deployment
# Install to: /etc/systemd/system/pyroscope.service.d/override.conf
#
# Most configuration is in /etc/pyroscope/config.yml
# This override sets instance addresses and CLI-only options

[Service]
# Clear the default ExecStart
ExecStart=
ExecStart=/usr/bin/pyroscope \
  -config.file=/etc/pyroscope/config.yml \
  -compactor.blocks-retention-period=720h \
  -compactor.ring.store=inmemory \
  -ingester.lifecycler.addr=127.0.0.1 \
  -distributor.ring.instance-addr=127.0.0.1 \
  -compactor.ring.instance-addr=127.0.0.1 \
  -store-gateway.sharding-ring.instance-addr=127.0.0.1 \
  -query-scheduler.ring.instance-addr=127.0.0.1 \
  -query-frontend.instance-addr=127.0.0.1

{
  "datasource": {
    "type": "postgres",
    "uid": "${postgres_datasource}"
  },
  "description": "Cross-country flights vs regular flights over the last 30 days",
  "fieldConfig": {
    "defaults": {
      "color": {
        "mode": "palette-classic"
      },
      "custom": {
        "hideFrom": {
          "tooltip": false,
          "viz": false,
          "legend": false
        }
      },
      "mappings": []
    },
    "overrides": []
  },
  "options": {
    "legend": {
      "displayMode": "table",
      "placement": "right",
      "showLegend": true,
      "values": [
        "value",
        "percent"
      ]
    },
    "pieType": "donut",
    "reduceOptions": {
      "calcs": [
        "lastNotNull"
      ],
      "fields": "",
      "values": false
    },
    "tooltip": {
      "mode": "single",
      "sort": "none"
    }
  },
  "targets": [
    {
      "datasource": {
        "type": "postgres",
        "uid": "${postgres_datasource}"
      },
      "editorMode": "code",
      "format": "table",
      "rawQuery": true,
      "rawSql": "SELECT\n  SUM(cross_country_count) as \"Cross-Country\",\n  SUM(flight_count - cross_country_count) as \"Local/Other\"\nFROM flight_analytics_daily\nWHERE date >= CURRENT_DATE - 30",
      "refId": "A",
      "sql": {
        "columns": [],
        "groupBy": [],
        "limit": 50
      }
    }
  ],
  "title": "Flight Type Distribution (Last 30 Days)",
  "type": "piechart"
}

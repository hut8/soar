# Rust build configuration for faster compilation

[build]
# Incremental compilation (enabled by default for dev, but explicit here)
incremental = true
# Enable tokio_unstable for tokio-console support
rustflags = ["--cfg", "tokio_unstable"]

[target.x86_64-unknown-linux-gnu]
# Fast linker configuration using mold
# Requires: sudo apt install mold clang
# If mold is not installed, cargo will fall back to the default linker
linker = "clang"
# rustflags = ["-C", "link-arg=-fuse-ld=mold"]

# Optimization flags for development builds
[profile.dev]
# Split debuginfo to reduce binary size and link time
split-debuginfo = "unpacked"  # Linux-specific, faster than "packed"

# Incremental compilation
incremental = true

# Reduce debuginfo in dependencies to speed up linking
[profile.dev.package."*"]
opt-level = 0
debug = 0  # No debug info for dependencies in dev builds

# Keep debug info for your own code
[profile.dev.build-override]
opt-level = 0
debug = 1

syntax = "proto3";

package soar.protocol;

// Source of the ingested message
enum IngestSource {
  // OGN/APRS ingestion
  OGN = 0;
  // ADS-B Beast format ingestion
  BEAST = 1;
  // ADS-B SBS/BaseStation format ingestion
  SBS = 2;
}

// Message envelope for communication between ingesters and soar-run
message Envelope {
  // Source of this message (which ingester sent it)
  IngestSource source = 1;

  // Timestamp when the message was received by the ingester (microseconds since Unix epoch)
  int64 timestamp_micros = 2;

  // Raw message payload (format depends on source)
  // - OGN: UTF-8 encoded APRS message string
  // - BEAST: Raw binary Beast frame
  // - SBS: Raw binary SBS frame
  bytes data = 3;
}
